<div class="ion-page" id="main-content">
  <ion-header>
    <ion-toolbar>
      <ion-title>Gestionar Usuarios</ion-title>
      <ion-buttons slot="end">
        <ion-menu-button></ion-menu-button>
      </ion-buttons>
    </ion-toolbar>
  </ion-header>

  <ion-content [fullscreen]="true">
    <ion-header collapse="condense">
      <ion-toolbar>
        <ion-title size="large">Gestión de Usuarios</ion-title>
      </ion-toolbar>
    </ion-header>

    <!-- Lista de Usuarios -->
    <ion-list>
      <ion-item *ngFor="let x of arregloUsuarios"class="usuario-item">
        <ion-label>
          <h2>{{x.username }}</h2>
          <p><strong>ID:</strong> {{x.id_usuario}}</p>
          <p><strong>Correo:</strong> {{x.correo_user }}</p>
          <p><strong>Rol:</strong> {{x.id_rol === 1 ? 'Administrador' : x.id_rol === 2 ? 'Usuario' : 'Desconocido'}}</p>
          <p><strong>Estado Ban: </strong> {{x.estadoBanUsuario === 1 ? 'Baneado' : x.estadoBanUsuario === 0 ? 'No Baneado' : 'Desconocido'}}</p>

          <ion-button (click)="toggleUsuario(x)" [color]="x.estadoBanUsuario ? 'danger' : 'success'" ><ion-icon [name]="x.estadoBanUsuario ? 'ban-outline' : 'checkmark-circle-outline'"></ion-icon>
          </ion-button>

          <ion-button (click)="cambiarRolUsuario(x)">
            {{ x.id_rol === 1 ? 'Hacer Usuario' : 'Hacer Administrador' }}
          </ion-button>

        </ion-label>
      </ion-item>
    </ion-list>


    <div *ngIf="pestanaRolUsuario" class="container-div">
      <h3>¿De verdad quieres hacer administrador a este usuario?</h3>
      <ion-button (click)="aceptarCambioRol()">Aceptar</ion-button>
      <ion-button (click)="cancelarCambioRol()">Cancelar</ion-button>
    </div>

  </ion-content>
</div>
